{% comment %}
  Subscribe and Save Widget
  Displays subscription options on product pages
{% endcomment %}

<div id="subscribe-save-widget" class="subscribe-save-widget" data-product-id="{{ product.id }}" data-weekly-discount="{{ block.settings.weekly_discount }}" data-biweekly-discount="{{ block.settings.biweekly_discount }}">
  <div class="subscribe-save-options">
    <!-- One-time purchase option -->
    <label class="subscribe-save-option subscribe-save-option--onetime">
      <input type="radio" name="purchase_option" value="onetime" checked>
      <span class="subscribe-save-option__radio"></span>
      <span class="subscribe-save-option__content">
        <span class="subscribe-save-option__title">One-time purchase</span>
      </span>
    </label>

    <!-- Subscription options -->
    <div class="subscribe-save-option subscribe-save-option--subscription">
      <div class="subscribe-save-option__header">
        <span class="subscribe-save-option__title">Subscribe and Save (Porch Pick-up Only)</span>
      </div>
      <div class="subscribe-save-option__choices">
        <label class="subscribe-save-choice">
          <input type="radio" name="purchase_option" value="weekly" data-frequency="WEEKLY" data-discount="{{ block.settings.weekly_discount }}">
          <span class="subscribe-save-choice__radio"></span>
          <span class="subscribe-save-choice__text">Deliver every week, <strong>{{ block.settings.weekly_discount }}% off</strong></span>
        </label>
        <label class="subscribe-save-choice">
          <input type="radio" name="purchase_option" value="biweekly" data-frequency="BIWEEKLY" data-discount="{{ block.settings.biweekly_discount }}">
          <span class="subscribe-save-choice__radio"></span>
          <span class="subscribe-save-choice__text">Deliver every 2 weeks, <strong>{{ block.settings.biweekly_discount }}% off</strong></span>
        </label>
      </div>
    </div>
  </div>

  <p class="subscribe-save-note">Auto-renews, skip or cancel anytime.</p>
</div>

{% schema %}
{
  "name": "Subscribe & Save",
  "target": "section",
  "templates": ["product"],
  "javascript": "subscribe-save.js",
  "stylesheet": "subscribe-save.css",
  "settings": [
    {
      "type": "range",
      "id": "weekly_discount",
      "min": 1,
      "max": 50,
      "step": 1,
      "unit": "%",
      "label": "Weekly Subscription Discount",
      "default": 10
    },
    {
      "type": "range",
      "id": "biweekly_discount",
      "min": 1,
      "max": 50,
      "step": 1,
      "unit": "%",
      "label": "Bi-Weekly Subscription Discount",
      "default": 5
    }
  ]
}
{% endschema %}
